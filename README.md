# 이커머스 고객 세분화 분석

## 1. Overview

### 📌 프로젝트 소개

**DACON 이커머스 고객 데이터를 활용한 고객 세그먼트 분류 및 맞춤형 마케팅 전략 수립**
본 프로젝트는 다양한 고객 행동 데이터를 기반으로 의미 있는 세그먼트를 도출하고, 이를 바탕으로 실질적인 **맞춤형 마케팅 전략**을 수립하는 것을 목표로 합니다. 

### 🎯 프로젝트 목적

다양한 고객 데이터를 통합 분석하여 **구매 여정, 세그먼트 특성, 마케팅 반응**을 체계적으로 이해하고 이를 기반으로 **전략적인 의사결정**을 지원합니다. 

#### 주요 목적

| 항목               | 설명                                                                        |
| ---------------- | ------------------------------------------------------------------------- |
| 고객 행동 및 특징 분석 | 구매 시점, 상품 특성, 마케팅 반응, 반복 구매 여부 등 데이터를 통합 분석하여 고객의 **행동 패턴**과 **선호도**를 파악  |
| 세그먼트 분류       | 고객, 상품, 마케팅 등 **다각도 데이터 기반**으로 의미 있는 세그먼트를 도출하고 **가치 평가**를 통해 전략적 우선순위 설정 |
| 맞춤형 마케팅 전략 수립 | 각 세그먼트의 **행동 특성에 기반한 타겟 마케팅 방안**을 설계하여 **캠페인 효과 극대화**를 목표로 실행 계획 제안       |


#### 기대 효과

| 항목           | 설명                                                                         |
| ------------ | -------------------------------------------------------------------------- |
| 고객 유지율 향상 | 고객의 특성과 구매 패턴을 바탕으로 **이탈 예측 및 방지**, 충성 고객 확보를 통해 **고객 생애가치(LTV)** 극대화      |
| 매출 증가     | **반복 구매 유도**, **맞춤형 프로모션**, **개인화 추천** 등을 통해 구매 빈도 및 단가 상승 → **수익성 향상** 기대 |

---

## 2. 팀원 소개

|사진|사진|사진|
|---|---|---|
|김혜원|박찬우|변해민|

---

## 3. 프로젝트 기간 및 수행 내용

| 기간               | 수행 내용                                                   |
|--------------------|------------------------------------------------------------|
| 2025.01.06 ~ 2025.01.09 | - 데이터 탐색적 분석(EDA) 수행<br> - 파생변수 생성<br>- merge 방식 결정<br>- 데이터 수정(할인율, 매출액 계산, 이상치 제거)|
| 2025.01.10 ~ 2025.01.13 | - 추가 EDA<br>- RFM 관련 자료 탐색 및 공부 |
| 2025.01.14 ~ 2025.01.16 | - 추가 EDA<br>- 데이터 수정(실질매출액 계산)<br>- 데이터 정규화<br>- RFM 척도 결정<br>- K-means 클러스터링 모델링 수행<br>- RFM으로 11개 세그먼트 분류     |
| 2025.01.17 ~ 2025.01.23 | - 세그먼트별 특성 분석<br>- 인사이트 도출 및 시각화<br>- 코호트 분석|
| 2025.01.24 ~ 2025.01.31 | - 세그먼트별 맞춤형 솔루션 제안<br>- 보고서 내용 정리 |
| 2025.04.11 ~ 2025.04.16 | - 마케팅 전략 수립 및 제안서 작성 |


---
## 4. 프로젝트 환경 및 구성 요소 

### 🔧 Tech stack
#### 사용 프로그램

| 항목            | 내용                                               |
|-----------------|----------------------------------------------------|
| Language        | ![Python Badge](https://camo.githubusercontent.com/0d0779a129f1dcf6c31613b701fe0646fd4e4d2ed2a7cbd61b27fd5514baa938/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d3336373041303f7374796c653d666f722d7468652d6261646765266c6f676f3d707974686f6e266c6f676f436f6c6f723d666664643534) |
| Development     | ![Jupyter](https://img.shields.io/badge/Jupyter-F37626?style=flat&logo=Jupyter&logoColor=white) ![Colab](https://img.shields.io/badge/Colab-F9AB00?style=flat&logo=Google%20Colab&logoColor=white) |
| Collaboration   | ![GitHub](https://img.shields.io/badge/GitHub-100000?logo=github&logoColor=white) ![Discord](https://img.shields.io/badge/Discord-5865F2?logo=discord&logoColor=white) |

#### 사용한 라이브러리

| 항목            | 내용                                               |
|-----------------|----------------------------------------------------|
| Python       |![scikit-learn](https://img.shields.io/badge/scikit--learn-F7931E?style=flat&logo=scikit-learn&logoColor=white) ![matplotlib](https://img.shields.io/badge/matplotlib-11557C?style=flat&logo=matplotlib&logoColor=white) ![seaborn](https://img.shields.io/badge/seaborn-76B7B2?style=flat&logo=seaborn&logoColor=white) ![pandas](https://img.shields.io/badge/pandas-150458?style=flat&logo=pandas&logoColor=white) ![numpy](https://img.shields.io/badge/numpy-013243?style=flat&logo=numpy&logoColor=white)|

### 📁 데이터 설명
이 프로젝트에서는 온라인 쇼핑몰의 거래, 고객, 마케팅, 할인, 세금 정보를 담은 5개의 CSV 파일을 활용합니다. <br>
각 파일의 컬럼 및 설명은 다음과 같습니다.

#### 📦 Onlinesales_info.csv
온라인 거래 상세 정보

| 컬럼명      | 설명                |
| -------- | ----------------- |
| 고객ID   | 고객 고유 식별자         |
| 거래ID   | 거래 건별 고유 번호       |
| 거래날짜   | 거래가 이루어진 날짜       |
| 제품ID   | 제품 고유 번호          |
| 제품카테고리 | 제품이 속한 카테고리       |
| 수량    | 고객이 구매한 제품 수량     |
| 평균금액   | 제품 1개당 가격 (달러 기준) |
| 배송료   | 배송비 (달러 기준)       |
| 쿠폰상태   | 할인쿠폰이 적용되었는지 여부   |


#### 👤 Customer_info.csv
고객 인적 정보

| 컬럼명    | 설명                 |
| ------ | ------------------ |
| 고객ID | 고객 고유 식별자          |
| 성별   | 고객의 성별 (남 / 여) |
| 고객지역 | 고객이 거주하는 지역        |
| 가입기간 | 가입 후 경과된 개월 수      |


#### 🎟️ Discount_info.csv
제품 할인 정보

| 컬럼명      | 설명               |
| -------- | ---------------- |
| 월      | 해당 할인 정보가 적용되는 달 |
| 제품카테고리 | 제품이 속한 카테고리      |
| 쿠폰코드   | 쿠폰 고유 식별자        |
| 할인율    | 쿠폰의 할인 비율 (%)    |


#### 📣 Marketing_info.csv
마케팅 비용 사용 내역

| 컬럼명      | 설명                         |
| -------- | -------------------------- |
| 날짜     | 마케팅이 진행된 날짜                |
| 오프라인비용 | 오프라인 광고/홍보에 사용된 비용 (달러 기준) |
| 온라인비용  | 온라인 광고/홍보에 사용된 비용 (달러 기준)  |


#### 💰 Tax_info.csv
제품 카테고리별 세금 정보

| 컬럼명      | 설명             |
| -------- | -------------- |
| 제품카테고리 | 세금이 적용되는 상품 분류 |
| GST    | 부가가치세율 (%)     |


---
## 5. 프로젝트 내용

[![Open in Colab](https://img.shields.io/badge/Open%20in-Google%20Colab-F9AB00?style=for-the-badge&logo=google-colab&logoColor=white)](https://colab.research.google.com/drive/1Lr5_MoE-CNjKgVhoTPOyufSYzdMKN-ma)

### 데이터 전처리 

| 항목                          | 수행 내용                                                                                                                                                                            |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **파생 변수 생성**             | - 거래날짜로부터 **월** 변수 파생 <br> - 수량 × 평균금액으로 **구매금액** 변수 생성 <br> - 구매금액 × 할인율 + 배송료에 **세금(GST)** 적용한 **총금액** 변수 생성                                                               |
| **제외된 제품 카테고리**           | - 제품카테고리 중 **Notebooks** 항목 제거                                                                                                                                                 |
| **데이터 병합 (`merged_df`)** | - `online_sales` + `customers_data`: 고객ID 기준 **Left Join** <br> - 위 결과 + `discount_coupon`: 월, 제품카테고리 기준 **다중 Join** <br> - 위 결과 + `tax_amount`: 제품카테고리 기준 **Left Join** |
| **할인율 보정 처리**            | - 월별 패턴에 따라 **NA값 할인율 보정** <br> 1,4,7,10월 → 10%, 2,5,8,11월 → 20%, 3,6,9,12월 → 30% <br> - **쿠폰코드가 NA인 경우**에도 동일한 규칙 적용                                                      |
| **실제 구매금액 계산**           | - 수량 × 평균금액으로 **구매 금액** 파생 <br> - 쿠폰상태가 'Used'인 경우 할인 적용 후 **총금액(실질매출)** 계산                                                                                                |
| **마케팅 총비용 계산**           | - 오프라인비용 + 온라인비용을 합산하여 **총비용** 파생변수 생성                                                                                                                                         |


### 시각화 및 탐색적 데이터 분석 (EDA)



| 항목             | 수행 내용                                                                                                                                                                                                                                                                         |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **마케팅 비용 시각화** | - marketing_spend의 `월` 기준으로 총비용과 총이익을 각각 합산하여 **월별 매출 대비 마케팅 비용 변동 추이** 분석<br> - `월` 기준으로 오프라인 마케팅 비용, 온라인 마케팅 비용을 각각 합산하여 **매출과의 상관관계 분석**<br> - `날짜` 기준으로 오프라인 및 온라인 마케팅 비용의 **일별 변동 추이 시각화**<br> - 매출 대비 비용 효율성을 나타내는 **ROI (Return on Investment)** 시각화 |
| **카테고리별 EDA**  | - merged_df의 제품카테고리 기준으로 수량을 합산하여 **카테고리별 총 구매 수량** 분석<br> - 제품카테고리 기준으로 평균금액을 합산하여 **카테고리별 총 매출액** 분석<br> - 고객지역과 제품카테고리 기준으로 수량을 합산하여 **제품 카테고리별로 많이 발송된 지역** 파악 <br>- merged_df의 제품테고리와 쿠폰상태를 기준으로 평균금액을 합산하여 **카테고리별 쿠폰 사용 유무에 따른 구매 비율** 파악 <br>- merged_df의 제품카테고리와 제품ID를 기준으로 구매금액을 합하여 **카테고리별 구매금액** 파악 <br>- 카테고리별로 가장 많이 구매된 제품 5가지 분석 <br>- merged_df의 제품카테고리와 할인율을 기준으로 거래ID를 집계하여 **카테고리별 가장 많이 사용된 쿠폰 할인율** 파악 |
| **쿠폰상태별 EDA** | - merged_df의 쿠폰상태를 집계하여 **쿠폰 상태별 고객 비율** 파악 <br>- merged_df의 월을 기준으로 사용된 쿠폰상태를 집계하여 **월별 카테고리 할인율의 규칙성**을 파악 |
| **월별 EDA** | - merged_df의 월을 기준으로 수량를 합산하여 **월별 구매 횟수** 파악 <br>- merged_df의 월을 기준으로 제품ID를 중복 없이 집계하여 **월별 판매 제품 종류 수** 파악 <br>- merged_df의 거래날짜를 기준으로 고객ID를 중복 없이 집계하여 **DAU(일별 구매한 고객 수)** 파악 <br>- merged_df의 월을 기준으로 고객ID를 중복 없이 집계하여 **MAU(월별 구매한 고객 수)** 파악 <br>- merged_df의 월을 기준으로 총금액과 수량을 각각 합산하여 **월별 매출 및 구매 수량 변동 추이** 파악 <br>- merged_df의 월을 기준으로 구매금액을 합산하여 **쿠폰과 세금 적용 전 월별 총 매출** 파악 <br>- merged_df의 월을 기준으로 총금액을 합산하여 **쿠폰과 세금 적용 후 월별총 매출** 파악 <br>- merged_df의 월과 제품카테고리를 기준으로 수량을 합산하여 **카테고리별 월 판매 수량** 파악 <br>- merged_df의 구매금액에 할인율을 적용하여 **할인된 금액** 파생변수 생성 후 월 기준으로 합산하여 **월별 쿠폰으로 할인된 총 금액** 파악 <br>- merged_df의 월을 기준으로 거래ID를 중복 없이 집계하여 **월별 거래 개수** 파악 <br>- 고객별 거래ID가 같은 경우를 고려하여 merged_df의 고객ID와 거래ID를 이용하여 **고객거래ID** 파생변수 생성 후 월을 기준으로 중복없이 집계하여 **월별 실제 주문 수** 파악 |
| **성별 EDA** | - merged_df의 성별을 기준으로 총금액을 합산하여 **총금액 성별 비중** |

### RFM

고객의 최근 구매 시점, 구매 빈도, 구매 금액을 기반으로 RFM 점수를 산출하고 이를 통해 고객 세그먼트를 분류하였다. 

| 항목                    | 수행 내용                                                                                                                                                                                                  |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **RFM 데이터 생성**        | - 전체 거래 중 가장 \*\*최근 거래일\*\*을 기준으로 각 고객의 거래일과의 차이를 계산하여 **Recency** 값을 정의<br> - 고객ID 기준으로 거래ID의 \*\*고유 개수(nunique)\*\*를 계산하여 **Frequency** 값으로 정의<br> - 고객ID 기준으로 총금액을 합산하여 **Monetary** 값으로 정의<br><img width="1760" height="613" alt="image" src="https://github.com/user-attachments/assets/025c2c59-5417-44bf-93ef-4677d9d8f80f" /> |
| **로그 변환**             | - 0에 치우쳐진 분포를 정규 분포에 가깝게 만들기 위해 **Frequency**와 **Monetary** 값에 대해 **로그 변환** 적용<br><img width="1767" height="630" alt="image" src="https://github.com/user-attachments/assets/c0edf156-9d78-4bc0-8b93-69833a62e781" /> |
| **RFM 점수 부여**         | - 각 R, F, M 값을 **5분위(quantile)** 기준으로 나누고, \*\*1점(하위)부터 5점(상위)\*\*까지 점수를 부여 <br>- RFM 값을 붙인 **RFM_Segment** 컬럼 생성 |
| **RFM 기반 고객 세그먼트 분류** | - **RFM_Segment** 컬럼을 기준으로 고객을 유형별로 세그먼트 분류<br> - 세그먼트 분류 기준은 [Bloomreach RFM Segmentation 기준](https://documentation.bloomreach.com/engagement/docs/rfm-segmentation)을 참고하여 정의 <br>- 11개 고객 세그먼트 유형 : 이탈 고객, 동면 고객, 놓치면 안 될 고객, 이탈 우려 고객, 휴면 예정 고객, 관심 필요 고객, 잠재 고객, 신규 고객, 잠재 충성 고객, 충성 고객, VIP 고객객                          |
| **11개 세그먼트 분석** | - rfm_df의 고객 세그먼트의 분포 파악 <br>- rfm_df의 고객 세그먼트와 제품카테고리를 기준으로 수량을 합산하여 **세그먼트별 제품 구매 수량** 파악 <br>- 제품 카테고리별로 고객 세그먼트에서 구매한 기록이 있는지 파악 <br>- 고객 세그먼트별 제품 카테고리를 기준으로 총금액을 합산하여 **세그먼트별 제품 카테고리 매출 비중** 파악 <br>- 고객 세그먼트별 제품 카테고리를 기준으로 수량을 합산하여 **세그먼트별 제품 구매 수량** 파악 <br>- 월과 고객 세그먼트를 기준으로 총금액을 합산하여 **고객 세그먼트별 월 매출 추이** 파악 <br>- 고객 세그먼트 기준으로 총금액을 합산하여 **고객 세그먼트별 총 매출 및 비율** 파악 <br>- 고객 세그먼트를 기준으로 성별을 집계하여 **고객 세그먼트별 성별 비중** 파악 <br>- 고객 세그먼트 기준으로 가입기간의 평균을 내어 **고객 세그먼트별 평균 가입기간** 파악 <br>- 고객 세그먼트를 기준으로 쿠폰상태를 집계하여 **고객 세그먼트별 쿠폰상태 비중** 파악 <br>- 고객 세그먼트를 기준으로 고객지역을 집계하여 **고객 세그먼트별 고객지역 분포** 파악 |

### K-means 클러스터링

고객을 유사한 특성에 따라 그룹화하기 위해 RFM 데이터를 기반으로 K-means 클러스터링을 수행하였다.

| 항목               | 수행 내용                                                                                                                                                                                                                                    |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **클러스터 수 결정**        | - Elbow 기법과 Silhouette 점수를 활용하여 다양한 군집 수에 대해 평가<br>- 두 지표를 종합적으로 고려해 **최적 클러스터 수 3개 결정** <br> <img width="573" height="898" alt="image" src="https://github.com/user-attachments/assets/ea6f4f2e-5336-401f-a8d1-bfcdadf67184" /> |
| **K-means 클러스터링 수행** | - R, F, M 점수를 합산한 **RFM_sum** 컬럼 기준으로 **K-means 클러스터링 실행**<br>- 3개 군집으로 분류하여 **고객 그룹 도출**<br>- RFM 그룹 숫자가 클수록 중요 고객임을 의미<br><br>![클러스터 시각화](https://github.com/user-attachments/assets/7c28d2d1-87f2-4fb3-ac90-68c8ac4bfb46)             |
| **3개 세그먼트 분석**       | - 세그먼트별 R, F, M 평균 파악<br>- 세그먼트별 평균 Frequency, Monetary 비교<br>- 클러스터×제품카테고리 집계로 **선호 제품 카테고리 분석**<br>- 클러스터×요일 기준 총금액 합산하여 **요일별 구매 행동 파악**<br>- 클러스터×월 기준 총금액 합산하여 **월별 구매 추이 분석**<br>- 클러스터×고객지역 기준 집계로 **지역 분포 파악** |



### 코호트 분석

고객의 구매 행동과 유지 패턴을 시계열적으로 분석하여 가입 시점별 고객 집단(코호트)의 장기적인 리텐션및 매출 기여도를 파악하기 위해 코호트 분석을 수행하였다. 

| 항목             | 수행 내용                                                                                                                                                                                                                                              |
| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **코호트 데이터 생성** | - merged_df에서 고객ID, 거래날짜, 총금액, 고객지역, 성별 컬럼 추출해 **`ch_data`** 생성<br> - ch_data의 고객ID별 **첫 거래날짜** 파악<br> - 거래날짜에서 첫 거래날짜를 빼서 **첫 구매 후 다음 구매까지 걸린 기간(월 단위)** 계산 및 분석에 활용                                                            |
| **코호트 시각화**    | - **첫 구매 후 다음 구매까지 걸린 기간(월)** 기준 월별 시각화<br> - **고객의 첫 거래날짜(월)** 시각화<br> - 두 변수(첫 거래날짜(월), 구매 후 기간)를 조합해 **월별 고객 유지 빈도 및 유지율** 파악<br> - Cohort Retention Matrix의 대각선 평균을 통해 **가입 후 N개월차 평균 고객 유지율** 도출<br> - 두 변수를 활용해 **월별 총 매출액 변화** 분석 및 시각화 |






---
## 6. 한 줄 소감 

| 팀원               | 소감                                                  |
|--------------------|------------------------------------------------------------|
| 김혜원 | ㅇㅇㅇ       |
| 박찬우 | ㅇㅇㅇ       |
| 변해민 | ㅇㅇㅇ       |


